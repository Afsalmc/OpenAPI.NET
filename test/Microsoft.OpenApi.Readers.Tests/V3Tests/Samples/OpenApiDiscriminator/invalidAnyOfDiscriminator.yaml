openapi: '3.0.0'
info:
  version: '1.0.0'
  title: Petstore - Invalid 'OneOf' discriminator 
servers:
    - url: http://petstore.swagger.io/api
paths:
  /pets/{id}:
    get:
      description: Returns a pet based on a single ID,
      operationId: findPetById
      parameters:
        - name: id
          in: path
          description: ID of pet to fetch
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: pet response
          content:
            application/json:
                schema:
                  anyOf:
                    - "$ref": '#/components/schemas/pet1'
                    - "$ref": '#/components/schemas/pet2'
                  discriminator:
                    propertyName: petType
components:
    schemas:
        pet1:
            type: object
            required:
            - id
            - name
            - petType
            properties:
              id:
                type: integer
                format: int64
              name:
                type: string
              tag:
                type: string
              petType:
                type: string
        pet2:
            type: object
            required:
            - id
            - name
            properties:
              id:
                type: integer
                format: int64
              name:
                type: string
              tag:
                type: string
